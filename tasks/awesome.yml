- name: Install AwesomeWM dependencies
  become: true
  community.general.xbps:
    name: 
    - cairo
    - pkg-config
    - dbus-devel
    - dbus-x11
    - pango
    - pango-devel
    - gdk-pixbuf-devel
    - libxdg-basedir-devel
    - libXfixes
    - libxkbcommon-devel
    - libxkbcommon-x11
    - LuaJIT
    - LuaJIT-devel
    - lua51-lgi
    - luarocks-lua51
    - startup-notification-devel
    - libxcb-devel
    - xcb-util-devel
    - xcb-util-cursor-devel
    - xcb-util-image-devel
    - xcb-util-keysyms-devel
    - xcb-util-wm-devel
    - xcb-util-xrm-devel
    - xcb-util-errors
    - ruby-asciidoctor
    - cmake
    - docbook-xsl
    - git
    - ImageMagick
    - xmlto
    - dex
    - librsvg
    - rlwrap

    state: present

- name: AwesomeWM checkout
  git:
    repo: https://github.com/awesomeWM/awesome.git
    dest: "/tmp/awesome"

- name: Make AwesomeWM
  shell: 'CMAKE_ARGS="-DLUA_LIBRARY=/usr/lib/libluajit-5.1.so -DLUA_INCLUDE_DIR=/usr/include/luajit-2.1" make'
  args:
    chdir: "/tmp/awesome"

- name: Install AwesomeWM
  become: true
  shell: "make install"
  args:
    chdir: "/tmp/awesome"
